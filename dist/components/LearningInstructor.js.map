{"version":3,"sources":["webpack:///./src/components/LearningInstructor/LearningInstructor.yaml","webpack:///./src/components/LearningInstructor/LearningInstructor.less","webpack:///./src/components/LearningInstructor/LearningInstructor.html?d853","webpack:///./src/components/LearningInstructor/LearningInstructor.less?2427","webpack:///./src/components/LearningInstructor/LearningInstructor.html","webpack:///./src/components/LearningInstructor/LearningInstructor.js","webpack:///./src/components/LearningInstructor/LearningInstructor.js?cdcd","webpack:///./src/components/LearningInstructor/LearningInstructor.less?cc26","webpack:///./src/components/LearningInstructor/LearningInstructor.vue","webpack:///./src/components/LearningInstructor/LearningInstructor.yaml?32cd","webpack:///./src/components/LearningInstructor/LearningInstructorComputed.js","webpack:///./src/components/LearningInstructor/LearningInstructorMethods.js","webpack:///./src/components/LearningInstructor/LearningInstructorMethodsFeedback.js","webpack:///./src/components/LearningInstructor/LearningInstructorMethodsNavigation.js","webpack:///./src/components/LearningInstructor/LearningInstructorMethodsSentence.js","webpack:///./src/components/LearningInstructor/LearningInstructorMethodsToLearn.js","webpack:///./src/components/LearningInstructor/LearningInstructorMethodsWord.js","webpack:///./src/components/LearningInstructor/LearningInstructorMounted.js","webpack:///./src/components/LearningInstructor/LearningInstructorWatch.js","webpack:///./src/components/LearningInstructor/sound/censor-beep-01.mp3"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA,kCAAkC,mBAAO,CAAC,2GAAsD;AAChG;AACA;AACA,cAAc,QAAS,UAAU,mFAAmF;AACpH;AACA;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;;AAEA;AACA,cAAc,mBAAO,CAAC,mhBAAsQ;AAC5R;AACA,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,6HAAgE;AAClF,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;ACXf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAqB,mBAAO,CAAC,oEAAe;AAC5C;;AAEA;AACA;AACA,W;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,aAAa;AACb,gBAAgB;AAChB,gBAAgB;AAChB,aAAa;AACb;;AAEwE;AACxE,8EAA0B;;AAE4C;AACtE,6EAAyB;;AAEiE;AAC1F,uFAAmC;;AAEmD;AACtF,qFAAiC;;AAE6C;AAC9E,iFAA6B;;AAEuD;AACpF,oFAAgC;;AAEsD;AACtF,qFAAiC;;AAEqC;AACtE,6EAAyB;;AAEyC;AAClE,2EAAuB;;AAER,iF;;;;;;;;;;;;AC9Cf;AAAA;AAAA,wCAAqE,CAAgB,sJAAG,EAAC,C;;;;;;;;;;;;ACAzF;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8G;AACzC;AACL;AACwC;;;AAGxG;AAC6F;AAC7F,gBAAgB,2GAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,0GAAM;AACR,EAAE,mHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACsQ;AACtQ,WAAW,uRAAM,iBAAiB,+RAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAkU,CAAgB,uYAAG,EAAC,C;;;;;;;;;;;;ACAtV;AAAA;AAAA;AAA+B;;AAEhB;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,wBAAwB,+CAAQ;AAChC;AACA;AACA;AACA,C;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAkD;;AAEnC;AACf;AACA,6CAA6C,gEAAS;AACtD;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;;;ACTe;;AAEf;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,O;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;AC9CA;AAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;ACfe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,O;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,C;;;;;;;;;;;;AC3LA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;;AAEf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACpFA;AAAA;;AAEe;AACf;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA,C;;;;;;;;;;;;ACnIA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;ACJA;AAAe;AACf;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,C;;;;;;;;;;;ACZA,mD","file":"components/LearningInstructor.js","sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(true);\n// Module\nexports.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"LearningInstructor.less\"}]);\n// Exports\nmodule.exports = exports;\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"span\")\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./LearningInstructor.less?vue&type=style&index=0&id=117601a2&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"54345dac\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./LearningInstructor.less?vue&type=style&index=0&id=117601a2&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./LearningInstructor.less?vue&type=style&index=0&id=117601a2&lang=less&scoped=true&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./LearningInstructor.html?vue&type=template&id=117601a2&scoped=true&\"","const MobileDetect = require('mobile-detect')\r\nconst md = new MobileDetect(window.navigator.userAgent)\r\n\r\nlet LearningInstructor = {\r\n  props: ['config', 'localConfig', 'utils'],\r\n  data () {    \r\n    this.$i18n.locale = this.localConfig.locale\r\n    return {\r\n      beep: null,\r\n      tryToStop: false,\r\n      md\r\n    }\r\n  },\r\n  //watch: {},  // LearningInstructorWatch.js\r\n  //computed: {}, // LearningInstructorComputed.js\r\n  //mounted() {}, // LearningInstructorMounted.js\r\n  methods: {} // LearningInstructorMethods.js\r\n}\r\n\r\nimport LearningInstructorComputed from './LearningInstructorComputed.js'\r\nLearningInstructorComputed(LearningInstructor)\r\n\r\nimport LearningInstructorMethods from './LearningInstructorMethods.js'\r\nLearningInstructorMethods(LearningInstructor)\r\n\r\nimport LearningInstructorMethodsNavigation from './LearningInstructorMethodsNavigation.js'\r\nLearningInstructorMethodsNavigation(LearningInstructor)\r\n\r\nimport LearningInstructorMethodsSentence from './LearningInstructorMethodsSentence.js'\r\nLearningInstructorMethodsSentence(LearningInstructor)\r\n\r\nimport LearningInstructorMethodsWord from './LearningInstructorMethodsWord.js'\r\nLearningInstructorMethodsWord(LearningInstructor)\r\n\r\nimport LearningInstructorMethodsToLearn from './LearningInstructorMethodsToLearn.js'\r\nLearningInstructorMethodsToLearn(LearningInstructor)\r\n\r\nimport LearningInstructorMethodsFeedback from './LearningInstructorMethodsFeedback.js'\r\nLearningInstructorMethodsFeedback(LearningInstructor)\r\n\r\nimport LearningInstructorMounted from './LearningInstructorMounted.js'\r\nLearningInstructorMounted(LearningInstructor)\r\n\r\nimport LearningInstructorWatch from './LearningInstructorWatch.js'\r\nLearningInstructorWatch(LearningInstructor)\r\n\r\nexport default LearningInstructor","import mod from \"-!./LearningInstructor.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./LearningInstructor.js?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./LearningInstructor.less?vue&type=style&index=0&id=117601a2&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./LearningInstructor.html?vue&type=template&id=117601a2&scoped=true&\"\nimport script from \"./LearningInstructor.js?vue&type=script&lang=js&\"\nexport * from \"./LearningInstructor.js?vue&type=script&lang=js&\"\nimport style0 from \"./LearningInstructor.less?vue&type=style&index=0&id=117601a2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"117601a2\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./LearningInstructor.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=%2Fmedia%2Fpudding%2FDATA%2Fpudding%2FCode-Porjects%2Fhtml%2FPWA-English-Speaking-Practice%2Fsrc%2Fcomponents%2FLearningInstructor%2FLearningInstructor.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/media/pudding/DATA/pudding/Code-Porjects/html/PWA-English-Speaking-Practice/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('117601a2')) {\n      api.createRecord('117601a2', component.options)\n    } else {\n      api.reload('117601a2', component.options)\n    }\n    module.hot.accept(\"./LearningInstructor.html?vue&type=template&id=117601a2&scoped=true&\", function () {\n      api.rerender('117601a2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/LearningInstructor/LearningInstructor.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./LearningInstructor.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=%2Fmedia%2Fpudding%2FDATA%2Fpudding%2FCode-Porjects%2Fhtml%2FPWA-English-Speaking-Practice%2Fsrc%2Fcomponents%2FLearningInstructor%2FLearningInstructor.vue&lang=yaml\"; export default mod; export * from \"-!../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./LearningInstructor.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=%2Fmedia%2Fpudding%2FDATA%2Fpudding%2FCode-Porjects%2Fhtml%2FPWA-English-Speaking-Practice%2Fsrc%2Fcomponents%2FLearningInstructor%2FLearningInstructor.vue&lang=yaml\"","import Snowball from 'snowball'\n\nexport default function (LearningInstructor) {\n  LearningInstructor.computed = {\n    currentSentence () {\n      if (this.localConfig.playingIndex === null \n              || this.localConfig.playingIndex === undefined\n              || !this.config.sentenceList\n              || !this.config.sentenceList[this.config.playingIndex]) {\n        return ''\n      }\n      return this.config.sentenceList[this.localConfig.playingIndex]\n    },\n    \n    currentSentenceWords () {\n      return this.tokenizeSentenceToWords(this.currentSentence)\n    },\n    \n    previousSentence () {\n      //console.log(this.localConfig.playingIndex)\n      if (this.localConfig.playingIndex === 0) {\n        return ''\n      }\n      return this.config.sentenceList[(this.localConfig.playingIndex - 1)]\n    },\n    nextSentence () {\n      //console.log(this.localConfig.playingIndex)\n      if (this.localConfig.playingIndex === this.config.sentenceList.length - 1) {\n        return ''\n      }\n      return this.config.sentenceList[(this.localConfig.playingIndex + 1)]\n    },\n    \n    stemmer () {\n      let stemmer = new Snowball('English');\n      return stemmer\n    }\n  }\n}","import beepSound from './sound/censor-beep-01.mp3'\n\nexport default function (LearningInstructor) {\n  LearningInstructor.methods.initBeep = function () {\n    this.beep = this.utils.SoundUtils.create(beepSound)\n  }\n  \n  LearningInstructor.methods.tokenizeSentenceToWords = function (sentence) {\n    return sentence.split(' ')\n  }\n}","\nexport default function (LearningInstructor) {\n  \n  let feedbackWonderful = null\n  let feedbackGreat = null\n  let feedbackGood = null\n  let feedbackOK = null\n  \n  LearningInstructor.methods.speakPracticeFeedback = async function (score) {\n    \n    if (!feedbackWonderful) {\n      // https://www.soeasyedu.com.tw/blog/online-learning/2018/09/to-encourage-somebody\n      feedbackWonderful = this.utils.RandomUtils(['Wonderful!', 'Perfect!', 'Awesome!'])\n      feedbackGreat = this.utils.RandomUtils(['Great.', 'Good Job.', 'Well done.'])\n      feedbackGood = this.utils.RandomUtils(['Good.', 'Not bad.', 'Keep it up!'])\n      feedbackOK = this.utils.RandomUtils(['OK.', 'Try again?', 'Stay strong!'])\n    }\n    \n    //console.log(result)\n    //await this.utils.AsyncUtils.sleep(time)\n    await this.utils.AsyncUtils.sleep()\n    if (score === 1) {\n      let option = {\n        pitch: Math.ceil(Math.random() * 3)/10 + 1\n      } \n      await this.utils.TextToSpeechUtils.startSpeak(this.$t(feedbackWonderful.sampleUnduplicated()), option)\n    }\n    else if (score >= 0.7) {\n      let option = {\n        pitch: Math.ceil(Math.random() * 5)/10 + 0.8\n      }\n      await this.utils.TextToSpeechUtils.startSpeak(this.$t(feedbackGreat.sampleUnduplicated()), option)\n    }\n    else if (score >= 0.5) {\n      let option = {\n        pitch: Math.ceil(Math.random() * 4)/10 + 0.7\n      }\n      await this.utils.TextToSpeechUtils.startSpeak(this.$t(feedbackGood.sampleUnduplicated()), option)\n    }\n    else {\n      let option = {\n        pitch: Math.ceil(Math.random() * 5)/10 + 0.5\n      }\n      await this.utils.TextToSpeechUtils.startSpeak(this.$t(feedbackOK.sampleUnduplicated()), option)\n    }\n  }\n}","export default function (LearningInstructor) {\n\n  LearningInstructor.methods.goToPreviousSentence = function () {\n    if (this.localConfig.playingIndex > 0) {\n      this.localConfig.playingIndex--\n      return true\n    }\n    return false\n  }\n  LearningInstructor.methods.goToNextSentence = function () {\n    if (this.localConfig.playingIndex < this.config.sentenceList.length - 1) {\n      this.localConfig.playingIndex++\n      return true\n    }\n    return false\n  }\n}","\nexport default function (LearningInstructor) {\n\n  LearningInstructor.methods.speakCurrentSentence = async function () {\n    if (this.config.currentSentenceIsSpeaking === true) {\n      this.utils.TextToSpeechUtils.stopSpeak()\n      this.tryToStop = true\n      await this.utils.AsyncUtils.sleep(100)\n      this.config.currentSentenceIsSpeaking = false\n      this.tryToStop = false\n      this.config.firstSpeakHint = true\n      return false\n    }\n\n    this.config.currentSentenceIsSpeaking = true\n    let time = await this.utils.TextToSpeechUtils.startSpeak(this.currentSentence)\n    if (this.tryToStop === true) {\n      return false\n    }\n    this.config.currentSentenceIsSpeaking = false\n\n    if (this.localConfig.speakingInstructionStrategy !== 'none') {\n\n      if (this.config.firstSpeakHint) {\n        await this.utils.AsyncUtils.sleep()\n        await this.utils.TextToSpeechUtils.startSpeak(this.$t(`Please repeat.`))\n        this.config.firstSpeakHint = false\n      }\n      await this.practiceSentence(time)\n    }\n\n\n    if (this.localConfig.autoPlay === true) {\n      if (this.goToNextSentence()) {\n        await this.utils.AsyncUtils.sleep()\n        this.speakCurrentSentence()\n      }\n    }\n  }\n  \n  LearningInstructor.methods.practiceSentence = async function (time) {\n\n    if (this.localConfig.practiceMode === 'writing') {\n      this.config.practiceSentence = ''\n    }\n    else if (this.localConfig.practiceMode === 'speaking') {\n      this.config.practiceSentence = null\n    }\n    \n    this.config.practiceSentenceEvaluationResult = []\n    this.config.practiceSentenceEvaluationScore = null\n    this.config.currentSentenceMask = this.localConfig.practiceSentenceMask\n\n    // --------------------------\n\n    if (!this.md.mobile()) {\n      await this.utils.AsyncUtils.sleep()\n      await this.beep.play()\n      await this.utils.AsyncUtils.sleep()\n    }\n\n    // --------------------------\n    if (this.localConfig.practiceMode === 'speaking') {\n      await this.practiceSentenceSpeaking()\n      await this.practiceSentenceSubmitSubmit()\n    }\n  }\n  \n  LearningInstructor.methods.practiceSentenceSpeaking = async function (time) {\n    if (!time) {\n      time = this.currentSentence.length * 100\n      //console.log(time)\n    }\n    time = time + 1000\n\n//    if (debugPractice === false) {\n    let muteCancel = false\n    setTimeout(() => {\n      if (this.config.practiceSentence && this.config.practiceSentence !== '') {\n        return true\n      }\n      this.utils.SpeechToTextUtils.stopListen()\n      muteCancel = true\n    }, 5000)\n\n    // --------------------------\n\n    let hasReceivcePracticeSentence = false\n    let thresholdWordsCount = Math.round(this.currentSentenceWords.length / 2)\n\n    while (!hasReceivcePracticeSentence) {\n      this.config.practiceSentence = await this.utils.SpeechToTextUtils.startListen(this.currentSentence, (processing) => {\n        this.config.practiceSentence = processing\n      }, this.localConfig.debugSpeechToTextUtilsMockup)\n\n      if (muteCancel === true) {\n        return false\n      }\n\n      // 如果字數太短，那也要重新聽取\n      //if (this.config.practiceSentence.split(' ').length < )\n      let practiceWords = this.tokenizeSentenceToWords(this.config.practiceSentence)\n      if (practiceWords.length >= thresholdWordsCount) {\n        hasReceivcePracticeSentence = true\n        await this.utils.AsyncUtils.sleep()\n      } else {\n        await this.utils.AsyncUtils.sleep()\n        await this.utils.TextToSpeechUtils.startSpeak(this.$t(`Please speak again.`))\n        await this.utils.AsyncUtils.sleep()\n        this.beep.play()\n      }\n\n      if (muteCancel === true) {\n        return false\n      }\n    } // while (!hasReceivcePracticeSentence) {\n  }\n    \n  LearningInstructor.methods.practiceSentenceSubmit = async function () {\n    \n    this.config.currentSentenceMask = false\n    //this.config.practiceSentence = 'ok'\n\n    this.config.practiceSentenceEvaluationResult = this.evaluateSentencePractice(this.config.practiceSentence, this.currentSentence)\n    this.config.practiceSentenceEvaluationScore = LearningInstructor.methods.scoreSentenceEvaluate(this.config.practiceSentenceEvaluationResult)\n    //console.log(this.config.practiceSentenceEvaluationScore)\n    await this.speakPracticeFeedback(this.config.practiceSentenceEvaluationScore)\n    \n    await this.utils.AsyncUtils.sleep(2000)\n  }\n\n  LearningInstructor.methods.evaluateSentencePractice = function (source, target) {\n    source = this.utils.DictUtils.filterWord(source)\n    target = this.utils.DictUtils.filterWord(target)\n    \n    \n    let resultRaw = this.utils.DiffUtils.diffWords(source, target)\n    //console.log(resultRaw)\n    let result = []\n    \n    resultRaw.forEach(r => {\n      if (!r.added) {\n        result.push(r)\n      }\n      else {\n        let words = this.tokenizeSentenceToWords(r.value)\n        \n        words.forEach(w => {\n          this.recordWordsToLearn(w)\n          \n          result.push({\n            added: true,\n            removed: false,\n            value: w\n          })\n        })\n      }\n    })\n    \n    return result\n  }\n  \n  LearningInstructor.methods.scoreSentenceEvaluate = function (results) {\n    let error = 0\n    results.forEach(r => {\n      //console.log(r.added)\n      if (r.added === true) {\n        error++\n      } \n    })\n    \n    //console.log(error)\n    \n    if (error > 5) {\n      return 0\n    }\n    else if (error <= 5 && error > 2) {\n      return 0.5\n    }\n    else if (error >= 1 && error <= 2) {\n      return 0.7\n    }\n    else {\n      return 1\n    }\n  }\n  \n}","let stopwords = [\n  'a',\n  'the',\n  'to',\n  'in',\n  'are',\n  'there',\n  'at',\n  'on',\n  'as',\n  'for',\n  'from',\n  'dont',\n  'have',\n  'has',\n  'than',\n  'this',\n  'that',\n  'once',\n  'was',\n  'make',\n  'made',\n  'its',\n]\n\nexport default function (LearningInstructor) {\n  \n  LearningInstructor.methods.stem = function (word) {\n    this.stemmer.setCurrent(word)\n    this.stemmer.stem()\n    return this.stemmer.getCurrent()\n  }\n  \n  LearningInstructor.methods.generateKeyName = function (word) {\n    word = this.utils.DictUtils.filterWord(word)\n    return 'WordToLearn:' + this.stem(word)\n  }\n  \n  LearningInstructor.methods.recordWordsToLearn = function (word) {\n    word = this.utils.DictUtils.filterWord(word)\n    if (stopwords.indexOf(word) > -1) {\n      return false\n    }\n    \n    let value = this.getWordToLearnScore(word)\n    \n    value++\n    \n    if (word.length > 10) {\n      value++\n    }\n    \n    let key = this.generateKeyName(word)\n    localStorage.setItem(key, value)\n  }\n  \n  LearningInstructor.methods.reduceWordsToLearn = function (word) {\n    let value = this.getWordToLearnScore(word)\n    \n    value--\n        \n    let key = this.generateKeyName(word)\n    localStorage.setItem(key, value)\n  }\n  \n  LearningInstructor.methods.getWordToLearnScore = function (word) {\n    let key = this.generateKeyName(word)\n    \n    let value = localStorage.getItem(key)\n    if (!value) {\n      value = 0\n    }\n    else {\n      value = Number(value)\n    }\n    \n    return value\n  }\n  \n  LearningInstructor.methods.clearWordToLearn = function (word) {\n    let key = this.generateKeyName(word)\n    localStorage.removeItem(key)\n    //console.log('clear', this.getWordToLearnScore(word))\n  }\n}","/* global LearningInstructor */\n\nexport default function (LearningInstructor) {\n  LearningInstructor.methods.speakWord = async function (word) {\n    await this.utils.TextToSpeechUtils.startSpeak(word)\n\n  }\n\n  LearningInstructor.methods.practiceWord = async function (word) {\n\n    //console.log(word)\n\n    if (this.localConfig.practiceMode === 'writing') {\n      this.config.practiceWord = ''\n    } else if (this.localConfig.practiceMode === 'speaking') {\n      this.config.practiceWord = null\n    }\n\n    this.config.practiceWordScore = null\n\n    this.config.currentWordMask = this.localConfig.practiceSentenceMask\n\n    // --------------------------\n\n    if (!this.md.mobile()) {\n      await this.utils.AsyncUtils.sleep()\n      await this.beep.play()\n      await this.utils.AsyncUtils.sleep()\n    }\n\n    // --------------------------\n\n    if (this.localConfig.practiceMode === 'speaking') {\n      await this.practiceWordSpeak(word)\n      await this.practiceWordSubmit(word)\n    }\n  }\n\n  LearningInstructor.methods.practiceWordSpeak = async function (word) {\n\n    let muteCancel = false\n    setTimeout(() => {\n      if (this.config.practiceWord && this.config.practiceWord !== '') {\n        return true\n      }\n      this.utils.SpeechToTextUtils.stopListen()\n      muteCancel = true\n    }, 3000)\n\n    let hasReceivcePracticeSentence = false\n    let thresholdWordsCount = 1\n\n    while (!hasReceivcePracticeSentence) {\n\n      this.config.practiceWord = await this.utils.SpeechToTextUtils.startListen(word, (processing) => {\n        this.config.practiceWord = processing\n      }, this.localConfig.debugSpeechToTextUtilsMockup)\n\n      if (!this.config.practiceWord) {\n        await this.utils.AsyncUtils.sleep()\n        continue\n      }\n\n      let practiceWords = this.tokenizeSentenceToWords(this.config.practiceWord)\n      if (practiceWords.length >= thresholdWordsCount) {\n        hasReceivcePracticeSentence = true\n        //await this.utils.AsyncUtils.sleep()\n      } else {\n        await this.utils.AsyncUtils.sleep()\n        await this.utils.TextToSpeechUtils.startSpeak(this.$t(`Please speak again.`))\n        await this.utils.AsyncUtils.sleep()\n        this.beep.play()\n      }\n\n      if (muteCancel === true) {\n        return false\n      }\n    } // while (!hasReceivcePracticeSentence) {\n  }\n\n  LearningInstructor.methods.practiceWordSubmit = async function (word) {\n\n    this.config.currentWordMask = false\n\n    //console.log(word)\n\n    this.config.practiceWordScore = this.evaluateWordPractice(this.config.practiceWord, word)\n    await this.speakPracticeFeedback(this.config.practiceWordScore)\n\n    //return false\n    if (this.config.practiceWordScore >= 0.7) {\n      //await this.utils.AsyncUtils.sleep()\n      this.clearWordToLearn(word)\n      this.config.currentWord = null\n    } else {\n      this.reduceWordsToLearn(word)\n    }\n  }\n\n  LearningInstructor.methods.evaluateWordPractice = function (source, target) {\n    let score = 1\n\n    source = this.utils.DictUtils.filterWord(source)\n    target = this.utils.DictUtils.filterWord(target)\n\n    let result = this.utils.DiffUtils.diffChars(source, target)\n    //console.log(result)\n    let addedCharCount = 0\n    result.forEach(r => {\n      if (r.added === true) {\n        addedCharCount = addedCharCount + r.count\n      }\n    })\n\n    //console.log(addedCharCount, target.length)\n\n    let percent = (target.length - addedCharCount) / target.length\n\n    if (percent >= 0.8) {\n      score = 1\n    } else if (percent >= 0.7) {\n      score = 0.7\n    } else if (percent >= 0.3) {\n      score = 0.5\n    } else {\n      score = 0\n    }\n\n    return score\n  }\n\n}","export default function (LearningInstructor) {\n  LearningInstructor.mounted = function () {\n    this.initBeep()\n  }\n}","export default function (LearningInstructor) {\n  LearningInstructor.watch = {\n    'localConfig.locale'() {\n      this.$i18n.locale = this.localConfig.locale;\n    },\n    'localConfig.playingIndex' () {\n      this.config.practiceSentence = null\n    },\n    'autoPlay.autoPlay' () {\n      this.config.firstSpeakHint = true\n    }\n  }\n}","module.exports = \"./dist/asset/censor-beep-01.mp3\";"],"sourceRoot":""}